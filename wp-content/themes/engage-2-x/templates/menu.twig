{# Main menu: https://dev.to/polgarj/bootstrap-navbar-with-vanilla-js-46km #}

{% if menu == mainMenu %}
	{% set navClass = 'menu navbar navbar-expand-lg navbar-light' %}
{% else %}
	{% set navClass = 'menu' %}
{% endif %}

{% if menu %}
	<nav {{ id ? "id='#{id}'" }} class="{{navClass}} menu__{{ menu.slug }} {{ collapsable ? " collapsable" }}" role="navigation">
		{% if menu == mainMenu %}
			<h1 class="header__logo navbar-brand" role="banner">
				<a class="header__logo__link" href="{{ site.link }}" rel="home">
					<span class="sr-text">
						{{ site.name }}
					</span>
					<img src="{{ theme.link }}/assets/img/cme-logo.png" alt="{{ site.name }} Logo" />
				</a>
			</h1>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNavDropdown">
				<ul class="menu__list navbar-nav">
					{% for item in menu.items %}
						<li class="menu__item nav-item {% if item.children %}dropdown{% endif %} {{ item.classes | join(' ') }}"{% if item.children %} tabindex="{{ 0 }}" {% endif %}>
							<a class="menu__link" target="{{ item.target }}" {% if item.link %} href="{{ item.link }}" {% endif %}>
								{{ item.title }}
							</a>
							{% if item.children %}
								<ul class="menu__sublist {{ collapsable ? " collapsable" }}">
									{% for child in item.children %}
										<li class="menu__item menu__sublist-item {{ child.classes | join(' ') }} {{ child.children ? " has-nested-menu" }}">
											<a tabindex="0" class="menu__link menu__sublist-link" target="{{ child.target }}" {% if child.link %} href="{{ child.link }}" {% endif %}>
												{{ child.title }}
											</a>
											{% if child.children %}
												<ul class="menu__sublist {{ collapsable ? " collapsable" }} nested">
													{% for item in child.children %}
														<li class="menu__item menu__sublist-item {{ item.classes | join(' ') }}">
															<a class="menu__link menu__sublist-link" target="{{ item.target }}" {% if item.link %} href="{{ item.link }}" {% endif %}>
																{{ item.title }}
															</a>
														</li>
													{% endfor %}
												</ul>
											{% endif %}
										</li>
									{% endfor %}
								</ul>
							{% endif %}
						</li>
					{% endfor %}
				</ul>
				{% include "partial/search.twig" with { 'menu' : mainMenu } %}
			</div>
		{% else %}
			<ul class="menu__list">
				{% for item in menu.items %}
					<li {% if item.children %} tabindex="{{0}}" {% endif %} class="menu__item {{ item.classes | join(' ') }}">
						<a class="menu__link" target="{{ item.target }}" {% if item.link %} href="{{ item.link }}" {% endif %}>{{ item.title }}</a>
						{% if item.children %}
							<ul class="menu__sublist {{ collapsable ? " collapsable" }}">
								{% for child in item.children %}
									<li class="menu__item menu__sublist-item {{ child.classes | join(' ') }} {{ child.children ? " has-nested-menu"}}">
										<a tabindex="0" class="menu__link menu__sublist-link" target="{{ child.target }}" {% if child.link %} href="{{ child.link }}" {% endif %}>{{ child.title }}</a>
										{% if child.children %}
											<ul class="menu__sublist {{ collapsable ? " collapsable" }} nested">
												{% for item in child.children %}
													<li class="menu__item menu__sublist-item {{ item.classes | join(' ') }}">
														<a class="menu__link menu__sublist-link" target="{{ item.target }}" {% if item.link %} href="{{ item.link }}" {% endif %}>{{ item.title }}</a>
													</li>
												{% endfor %}
											</ul>
										{% endif %}
									</li>
								{% endfor %}
							</ul>
						{% endif %}
					</li>
				{% endfor %}
			</ul>
		{% endif %}
	</nav>
{% endif %}
{% if menu == quickLinks %}
	{% include "partial/search.twig" with {
			'menu' : quickLinks
		} %}
{% endif %}


{# if menu is main menu and has the aria-hidden attribute #}



